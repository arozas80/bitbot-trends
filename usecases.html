<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Showcase OpenClaw (ES) — Command Center</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .container{max-width:1180px;margin:0 auto;padding:24px;}
    .topbar{display:flex;gap:12px;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;margin-bottom:16px;}
    .topbar a{color:inherit;opacity:.85;text-decoration:none;}
    .filters{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    input[type="search"],select{background:#0f141b;border:1px solid #263244;color:#e8eef7;border-radius:10px;padding:10px 12px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px;margin-top:16px;}
    .card{background:#0f141b;border:1px solid #263244;border-radius:14px;padding:14px;cursor:pointer;transition:transform .05s ease;}
    .card:hover{transform:translateY(-1px)}
    .meta{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:8px;}
    .pill{font-size:12px;opacity:.9;background:#162030;border:1px solid #263244;border-radius:999px;padding:4px 10px;white-space:nowrap;}
    .author{font-size:12px;opacity:.9}
    .likes{font-size:12px;opacity:.85}
    .title{font-weight:800;margin:6px 0 8px 0;}
    .summary{opacity:.9;line-height:1.35;margin:0 0 10px 0;}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;opacity:.85;background:#111a27;border:1px solid #223047;border-radius:999px;padding:3px 8px;}
    .count{opacity:.8}

    /* modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:18px;z-index:9999;}
    .modal.open{display:flex;}
    .panel{max-width:920px;width:100%;background:#0b1017;border:1px solid #263244;border-radius:16px;box-shadow:0 30px 120px rgba(0,0,0,.5);}
    .panel-h{display:flex;justify-content:space-between;gap:10px;align-items:flex-start;padding:16px 16px 0 16px;}
    .panel-h .hmeta{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .close{background:transparent;border:1px solid #263244;color:#e8eef7;border-radius:10px;padding:6px 10px;cursor:pointer;}
    .panel-b{padding:16px;}
    .detail{white-space:pre-wrap;line-height:1.4;opacity:.95;margin-top:12px;background:#0f141b;border:1px solid #263244;border-radius:12px;padding:12px;}
    .uc-list{margin:10px 0 0 0;padding-left:18px;}
    .uc-list li{margin:6px 0;}
    .muted{opacity:.75;font-size:12px}
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div>
        <div style="font-size:20px;font-weight:900;">Showcase OpenClaw (ES)</div>
        <div class="count" id="count"></div>
        <div class="muted">Tip: tocá una tarjeta para ver el detalle completo en español.</div>
      </div>
      <div class="filters">
        <a href="index.html">← Volver</a>
        <select id="category"></select>
        <input id="q" type="search" placeholder="Buscar (título, detalle, tags)" />
      </div>
    </div>

    <div class="grid" id="grid"></div>
  </div>

  <div class="modal" id="modal" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true">
      <div class="panel-h">
        <div>
          <div class="hmeta" id="m-meta"></div>
          <div style="font-size:20px;font-weight:900;margin-top:8px" id="m-title"></div>
          <div style="opacity:.9;margin-top:6px" id="m-summary"></div>
        </div>
        <button class="close" id="m-close">Cerrar</button>
      </div>
      <div class="panel-b">
        <div id="m-tags" class="tags"></div>
        <div class="detail" id="m-detail"></div>
        <div style="margin-top:10px;font-weight:800;">Casos de uso (en corto)</div>
        <ul class="uc-list" id="m-ucs"></ul>
      </div>
    </div>
  </div>

<script>
const $ = (id)=>document.getElementById(id);
const modal=$('modal');
const closeBtn=$('m-close');

function openModal(item){
  $('m-meta').innerHTML = `
    <span class="pill">${item.category || 'Caso de uso'}</span>
    <span class="author">${item.author || ''}</span>
    <span class="likes">❤️ ${item.likes ?? ''}</span>
  `;
  $('m-title').textContent = item.titulo_es || '';
  $('m-summary').textContent = item.resumen_es || '';
  $('m-tags').innerHTML = (item.use_cases_es||[]).slice(0,0).map(t=>`<span class="tag">${t}</span>`).join('');

  $('m-detail').textContent = item.detalle_es || '';

  const ucs = item.use_cases_es || [];
  $('m-ucs').innerHTML = ucs.map(x=>`<li>${x}</li>`).join('') || '<li>(sin bullets)</li>';

  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');
}
function closeModal(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
}
closeBtn.addEventListener('click', closeModal);
modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

async function main(){
  const data = await fetch('showcase_full_es_v2.json').then(r=>r.json());

  const cats = ['Todas', ...Array.from(new Set(data.map(x=>x.category))).filter(Boolean).sort((a,b)=>a.localeCompare(b,'es'))];
  const sel=$('category');
  sel.innerHTML=cats.map(c=>`<option value="${c}">${c}</option>`).join('');

  const q=$('q');
  const grid=$('grid');
  const count=$('count');

  function render(){
    const term=q.value.trim().toLowerCase();
    const cat=sel.value;
    let items=data.slice();
    if(cat && cat!=='Todas') items=items.filter(x=>x.category===cat);
    if(term){
      items=items.filter(x=>{
        const blob=[x.titulo_es,x.resumen_es,x.detalle_es,(x.use_cases_es||[]).join(' '),x.author,x.category].join(' ').toLowerCase();
        return blob.includes(term);
      });
    }

    // Order by likes desc then title
    items.sort((a,b)=> (parseInt(b.likes||0,10)-parseInt(a.likes||0,10)) || (a.titulo_es||'').localeCompare(b.titulo_es||'', 'es'));

    count.textContent = `${items.length} entradas`;

    grid.innerHTML = items.map((x,idx)=>{
      const pill=x.category||'Caso de uso';
      return `
      <div class="card" data-idx="${idx}">
        <div class="meta">
          <span class="pill">${pill}</span>
          <span class="author">${x.author||''}</span>
        </div>
        <div class="title">${x.titulo_es||''}</div>
        <p class="summary">${x.resumen_es||''}</p>
        <div class="muted">❤️ ${x.likes ?? 0}</div>
      </div>`;
    }).join('');

    grid.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', ()=>{
        const idx=parseInt(card.getAttribute('data-idx'),10);
        openModal(items[idx]);
      });
    });
  }

  sel.addEventListener('change', render);
  q.addEventListener('input', render);
  render();
}
main();
</script>
</body>
</html>
